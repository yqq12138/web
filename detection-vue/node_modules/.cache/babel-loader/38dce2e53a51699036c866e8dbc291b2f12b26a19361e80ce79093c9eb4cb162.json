{"ast":null,"code":"import { createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, createCommentVNode as _createCommentVNode, normalizeClass as _normalizeClass, vModelText as _vModelText, withKeys as _withKeys, withDirectives as _withDirectives } from \"vue\";\nconst _hoisted_1 = {\n  class: \"chat-page\"\n};\nconst _hoisted_2 = {\n  class: \"chat-box\"\n};\nconst _hoisted_3 = {\n  class: \"chat-history\"\n};\nconst _hoisted_4 = [\"src\"];\nconst _hoisted_5 = [\"src\"];\nconst _hoisted_6 = {\n  class: \"chat-inputs\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_cache[4] || (_cache[4] = _createElementVNode(\"h2\", null, \"üí¨ AI ÂõæÊñáËØÜÂà´Á≥ªÁªü\", -1 /* HOISTED */)), _createElementVNode(\"div\", _hoisted_3, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.messages, (msg, index) => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      key: index,\n      class: _normalizeClass(['msg', msg.role])\n    }, [_createElementVNode(\"p\", null, [_createElementVNode(\"strong\", null, _toDisplayString(msg.role === 'user' ? 'ÊàëÔºö' : 'AIÔºö'), 1 /* TEXT */), _createTextVNode(\" \" + _toDisplayString(msg.text), 1 /* TEXT */)]), msg.imageUrl ? (_openBlock(), _createElementBlock(\"img\", {\n      key: 0,\n      src: msg.imageUrl,\n      class: \"chat-image\"\n    }, null, 8 /* PROPS */, _hoisted_4)) : _createCommentVNode(\"v-if\", true), msg.markedImageUrl ? (_openBlock(), _createElementBlock(\"img\", {\n      key: 1,\n      src: msg.markedImageUrl,\n      class: \"chat-image marked\"\n    }, null, 8 /* PROPS */, _hoisted_5)) : _createCommentVNode(\"v-if\", true)], 2 /* CLASS */);\n  }), 128 /* KEYED_FRAGMENT */))]), _createElementVNode(\"div\", _hoisted_6, [_withDirectives(_createElementVNode(\"input\", {\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.userInput = $event),\n    type: \"text\",\n    placeholder: \"ËæìÂÖ•ÂÜÖÂÆπÔºàÈùûÂøÖÈ°ªÔºâ\",\n    onKeyup: _cache[1] || (_cache[1] = _withKeys((...args) => $options.sendMessage && $options.sendMessage(...args), [\"enter\"])),\n    class: \"chat-input\"\n  }, null, 544 /* NEED_HYDRATION, NEED_PATCH */), [[_vModelText, $data.userInput]]), _createElementVNode(\"input\", {\n    type: \"file\",\n    accept: \"image/*\",\n    onChange: _cache[2] || (_cache[2] = (...args) => $options.handleImageChange && $options.handleImageChange(...args)),\n    class: \"file-input\"\n  }, null, 32 /* NEED_HYDRATION */), _createElementVNode(\"button\", {\n    class: \"send-btn\",\n    onClick: _cache[3] || (_cache[3] = (...args) => $options.sendMessage && $options.sendMessage(...args))\n  }, \"ÂèëÈÄÅ\")])]), _cache[5] || (_cache[5] = _createElementVNode(\"div\", {\n    class: \"background-decor\"\n  }, null, -1 /* HOISTED */))]);\n}","map":{"version":3,"names":["class","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_hoisted_3","_Fragment","_renderList","$data","messages","msg","index","key","_normalizeClass","role","_toDisplayString","_createTextVNode","text","imageUrl","src","_hoisted_4","_createCommentVNode","markedImageUrl","_hoisted_5","_hoisted_6","_cache","$event","userInput","type","placeholder","onKeyup","_withKeys","args","$options","sendMessage","accept","onChange","handleImageChange","onClick"],"sources":["D:\\web\\qianrushi\\my-first-vue-app\\src\\views\\ChatWithAI.vue"],"sourcesContent":["<template>\r\n  <div class=\"chat-page\">\r\n    <div class=\"chat-box\">\r\n      <h2>üí¨ AI ÂõæÊñáËØÜÂà´Á≥ªÁªü</h2>\r\n      <div class=\"chat-history\">\r\n        <div v-for=\"(msg, index) in messages\" :key=\"index\" :class=\"['msg', msg.role]\">\r\n          <p><strong>{{ msg.role === 'user' ? 'ÊàëÔºö' : 'AIÔºö' }}</strong> {{ msg.text }}</p>\r\n          <img v-if=\"msg.imageUrl\" :src=\"msg.imageUrl\" class=\"chat-image\" />\r\n          <img v-if=\"msg.markedImageUrl\" :src=\"msg.markedImageUrl\" class=\"chat-image marked\" />\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"chat-inputs\">\r\n        <input\r\n            v-model=\"userInput\"\r\n            type=\"text\"\r\n            placeholder=\"ËæìÂÖ•ÂÜÖÂÆπÔºàÈùûÂøÖÈ°ªÔºâ\"\r\n            @keyup.enter=\"sendMessage\"\r\n            class=\"chat-input\"\r\n        />\r\n        <input type=\"file\" accept=\"image/*\" @change=\"handleImageChange\" class=\"file-input\" />\r\n        <button class=\"send-btn\" @click=\"sendMessage\">ÂèëÈÄÅ</button>\r\n      </div>\r\n    </div>\r\n    <div class=\"background-decor\"></div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios'\r\n\r\nexport default {\r\n  name: 'ChatWithAI',\r\n  data() {\r\n    return {\r\n      userInput: '',\r\n      imageFile: null,\r\n      imageUrl: '',\r\n      messages: []\r\n    }\r\n  },\r\n  methods: {\r\n    handleImageChange(e) {\r\n      const file = e.target.files[0]\r\n      if (file) {\r\n        this.imageFile = file\r\n        this.imageUrl = URL.createObjectURL(file)\r\n      }\r\n    },\r\n    async sendMessage() {\r\n      if (!this.imageFile) {\r\n        alert('ËØ∑ÂÖàÈÄâÊã©‰∏ÄÂº†ÂõæÁâá‰∏ä‰º†Âìà~')\r\n        return\r\n      }\r\n\r\n      // ÂÖàÊääÁî®Êà∑Ê∂àÊÅØÔºàÂõæÁâá+ÊñáÂ≠óÔºâÊé®ÂÖ•ËÅäÂ§©ËÆ∞ÂΩï\r\n      this.messages.push({\r\n        role: 'user',\r\n        text: this.userInput || 'Ôºà‰ªÖ‰∏ä‰º†ÂõæÁâáÔºâ',\r\n        imageUrl: this.imageUrl\r\n      })\r\n\r\n      const formData = new FormData()\r\n      formData.append('file', this.imageFile)\r\n      formData.append('text', this.userInput || '')\r\n\r\n      try {\r\n        const res = await axios.post('/api/detection/detectWithImageChat', formData, {\r\n          headers: { 'Content-Type': 'multipart/form-data' }\r\n        })\r\n\r\n        if (res.data.error) {\r\n          this.messages.push({\r\n            role: 'assistant',\r\n            text: 'ËØÜÂà´Â§±Ë¥•Ôºö' + res.data.error\r\n          })\r\n          return\r\n        }\r\n\r\n        // AIËØÜÂà´ÁªìÊûúÊ∂àÊÅØ\r\n        this.messages.push({\r\n          role: 'assistant',\r\n          text: `ËØÜÂà´ÁªìÊûúÔºö${res.data.result}\\nÁΩÆ‰ø°Â∫¶Ôºö${res.data.confidence}%`,\r\n          imageUrl: res.data.imageUrl || null,\r\n          markedImageUrl: res.data.markedImageUrl || null\r\n        })\r\n\r\n      } catch (err) {\r\n        this.messages.push({\r\n          role: 'assistant',\r\n          text: 'ËØ∑Ê±ÇÂºÇÂ∏∏Ôºö' + (err.response?.data?.error || err.message)\r\n        })\r\n      } finally {\r\n        // Ê∏ÖÁ©∫ËæìÂÖ•Ê°ÜÂíåÊñá‰ª∂\r\n        this.userInput = ''\r\n        this.imageFile = null\r\n        this.imageUrl = ''\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.chat-page {\r\n  position: absolute;\r\n  top: 60px;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  background: linear-gradient(to right, #1c1c1c, #2a2a2a);\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  padding: 40px 20px;\r\n  overflow: auto;\r\n  box-sizing: border-box;\r\n}\r\n\r\n.chat-box {\r\n  background: rgba(0, 0, 0, 0.3);\r\n  border: 1px solid #00eaff55;\r\n  border-radius: 12px;\r\n  box-shadow: 0 0 20px rgba(0, 234, 255, 0.1);\r\n  padding: 30px;\r\n  max-width: 700px;\r\n  width: 100%;\r\n}\r\n\r\n.chat-box h2 {\r\n  font-size: 24px;\r\n  color: #00eaff;\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.chat-history {\r\n  max-height: 400px;\r\n  overflow-y: auto;\r\n  padding-right: 8px;\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.msg {\r\n  margin-bottom: 16px;\r\n  color: #e0f7ff;\r\n}\r\n\r\n.msg.user {\r\n  text-align: right;\r\n  color: #bbdefb;\r\n}\r\n\r\n.msg.assistant {\r\n  text-align: left;\r\n  color: #c8e6c9;\r\n}\r\n\r\n.chat-image {\r\n  max-width: 200px;\r\n  margin-top: 10px;\r\n  border-radius: 8px;\r\n  display: block;\r\n}\r\n\r\n.chat-inputs {\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  gap: 10px;\r\n  margin-top: 10px;\r\n}\r\n\r\n.chat-input {\r\n  flex: 1;\r\n  padding: 10px;\r\n  border: 1px solid #00eaff55;\r\n  border-radius: 8px;\r\n  background: #222;\r\n  color: #fff;\r\n  outline: none;\r\n}\r\n\r\n.file-input {\r\n  color: #fff;\r\n}\r\n\r\n.send-btn {\r\n  padding: 10px 20px;\r\n  background: #00eaff;\r\n  border: none;\r\n  border-radius: 8px;\r\n  color: #000;\r\n  font-weight: bold;\r\n  cursor: pointer;\r\n  transition: background 0.3s;\r\n}\r\n.send-btn:hover {\r\n  background: #00bcd4;\r\n}\r\n\r\n.background-decor {\r\n  position: absolute;\r\n  bottom: -100px;\r\n  left: -150px;\r\n  width: 400px;\r\n  height: 400px;\r\n  background: radial-gradient(circle at center, rgba(0, 234, 255, 0.2), transparent);\r\n  filter: blur(120px);\r\n  pointer-events: none;\r\n}\r\n</style>\r\n"],"mappings":";;EACOA,KAAK,EAAC;AAAW;;EACfA,KAAK,EAAC;AAAU;;EAEdA,KAAK,EAAC;AAAc;mBAJ/B;mBAAA;;EAYWA,KAAK,EAAC;AAAa;;uBAX5BC,mBAAA,CAwBM,OAxBNC,UAwBM,GAvBJC,mBAAA,CAqBM,OArBNC,UAqBM,G,0BApBJD,mBAAA,CAAqB,YAAjB,cAAY,sBAChBA,mBAAA,CAMM,OANNE,UAMM,I,kBALJJ,mBAAA,CAIMK,SAAA,QATdC,WAAA,CAKoCC,KAAA,CAAAC,QAAQ,EAL5C,CAKqBC,GAAG,EAAEC,KAAK;yBAAvBV,mBAAA,CAIM;MAJiCW,GAAG,EAAED,KAAK;MAAGX,KAAK,EALjEa,eAAA,SAK2EH,GAAG,CAACI,IAAI;QACzEX,mBAAA,CAA+E,YAA5EA,mBAAA,CAAyD,gBAAAY,gBAAA,CAA9CL,GAAG,CAACI,IAAI,4CANhCE,gBAAA,CAMsE,GAAC,GAAAD,gBAAA,CAAGL,GAAG,CAACO,IAAI,iB,GAC7DP,GAAG,CAACQ,QAAQ,I,cAAvBjB,mBAAA,CAAkE;MAP5EW,GAAA;MAOoCO,GAAG,EAAET,GAAG,CAACQ,QAAQ;MAAElB,KAAK,EAAC;4BAP7DoB,UAAA,KAAAC,mBAAA,gBAQqBX,GAAG,CAACY,cAAc,I,cAA7BrB,mBAAA,CAAqF;MAR/FW,GAAA;MAQ0CO,GAAG,EAAET,GAAG,CAACY,cAAc;MAAEtB,KAAK,EAAC;4BARzEuB,UAAA,KAAAF,mBAAA,e;oCAYMlB,mBAAA,CAUM,OAVNqB,UAUM,G,gBATJrB,mBAAA,CAME;IAnBV,uBAAAsB,MAAA,QAAAA,MAAA,MAAAC,MAAA,IAcqBlB,KAAA,CAAAmB,SAAS,GAAAD,MAAA;IAClBE,IAAI,EAAC,MAAM;IACXC,WAAW,EAAC,WAAW;IACtBC,OAAK,EAAAL,MAAA,QAAAA,MAAA,MAjBlBM,SAAA,KAAAC,IAAA,KAiB0BC,QAAA,CAAAC,WAAA,IAAAD,QAAA,CAAAC,WAAA,IAAAF,IAAA,CAAW;IACzBhC,KAAK,EAAC;iEAJGQ,KAAA,CAAAmB,SAAS,E,GAMtBxB,mBAAA,CAAqF;IAA9EyB,IAAI,EAAC,MAAM;IAACO,MAAM,EAAC,SAAS;IAAEC,QAAM,EAAAX,MAAA,QAAAA,MAAA,UAAAO,IAAA,KAAEC,QAAA,CAAAI,iBAAA,IAAAJ,QAAA,CAAAI,iBAAA,IAAAL,IAAA,CAAiB;IAAEhC,KAAK,EAAC;qCACtEG,mBAAA,CAAyD;IAAjDH,KAAK,EAAC,UAAU;IAAEsC,OAAK,EAAAb,MAAA,QAAAA,MAAA,UAAAO,IAAA,KAAEC,QAAA,CAAAC,WAAA,IAAAD,QAAA,CAAAC,WAAA,IAAAF,IAAA,CAAW;KAAE,IAAE,E,+BAGpD7B,mBAAA,CAAoC;IAA/BH,KAAK,EAAC;EAAkB,4B","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}